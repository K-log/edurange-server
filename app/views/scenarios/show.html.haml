= subscribe_to "/scenarios/#{@scenario.id}"
%div.panel.panel-default#scenario{data: {id: @scenario.id}}
  %div.panel-heading
    %b
      Scenario - 
      =@scenario.name
  %div.panel-body
    %dl
      %dt Status:
      %dd
        %span#scenario-status
          = @scenario.status
      %dt Description:
      %dd= @scenario.description

    %div.page-header
      %h3 Boot Progress

    %dl
      %dt
        Clouds Booted:
      %dd
        %span#cloud-count
          = @cloud_booted
        of 
        %span#cloud-total
          = @cloud_count
      %dt
        Subnets Booted:
      %dd
        %span#subnet-count
          = @subnet_booted
        of
        %span#subnet-total
          = @subnet_count

      %dt
        Instances Booted:
      %dd
        %span#instance-count
          = @instance_booted
        of
        %span#instance-total
          = @instance_count

  %h3#console-header Console Log
  %pre#console
    - until @scenario.log
      = @scenario.log


  %div.btn-group#scenario-buttons
    = link_to 'Boot', boot_scenario_path(@scenario), class: 'btn btn-primary'
    = link_to 'dev_boot', dev_boot_scenario_path(@scenario), class: 'btn btn-default'
    = link_to 'Unboot', unboot_scenario_path(@scenario), class: 'btn btn-default'
    = link_to 'dev_unboot', dev_unboot_scenario_path(@scenario), class: 'btn btn-default'
    = link_to 'Edit', edit_scenario_path(@scenario), class: 'btn btn-default'
    = link_to 'Back', scenarios_path, class: 'btn btn-default'
    = link_to 'Destroy', @scenario, :method => :delete, class: 'btn btn-default'

  %h3 Instructions
  %dl
    = @scenario.instructions

  %h3 Scoring
  %dl
    = link_to 'Instructor View', '/scoring/instructor/' + @scenario.id.to_s
    \- shows questions and answers
    %p
    = link_to 'Student View', '/scoring/student/' + @scenario.id.to_s
    \- shows only questions, lets you answer them 

  %h3 Resources
  - @scenario.clouds.each do |cloud|
    %dl
      Cloud: 
      %b= cloud.name
      status:
      = cloud.status
      , driver:
      = cloud.driver_id

      - cloud.subnets.each do |subnet|
        %dl
          Subnet:
          %b= subnet.name
          status:
          = subnet.status

          - subnet.instances.each do |instance|
            %dl
              Instance:
              %b=instance.name
              IP Address:
              =instance.ip_address
              - if instance.internet_accessible
                , Public IP:
                - if instance.provider_instance_public_ip
                  =instance.provider_instance_public_ip
                - else
                  Not Set

              - instance.groups.each do |group|
                %dl
                  Group:
                  %b=group.name

                  - group.players.each do |player|
                    %dl
                      Player:
                      login: 
                      = "'" + player.login + "'"
                      , password:
                      = "'" + player.password + "'"


